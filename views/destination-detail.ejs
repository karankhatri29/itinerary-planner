
<!-- views/destination-detail.ejs -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= destination.name %> - Tamil Nadu Itinerary Planner</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">Home</a></li>
                <li class="breadcrumb-item"><a href="/destinations">Destinations</a></li>
                <li class="breadcrumb-item active"><%= destination.name %></li>
            </ol>
        </nav>
        
        <div class="destination-header mb-4">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1><%= destination.name %></h1>
                    <div class="categories mb-2">
                        <% destination.categories.forEach(category => { %>
                            <span class="badge bg-secondary me-1"><%= category %></span>
                        <% }); %>
                    </div>
                    <p class="lead"><%= destination.tagline %></p>
                </div>
                <div class="col-md-4 text-md-end">
                    <a href="/" class="btn btn-primary">Plan a Trip Here</a>
                </div>
            </div>
        </div>
        
        <div class="row mb-4">
            <div class="col-md-8">
                <div id="destinationCarousel" class="carousel slide mb-4" data-bs-ride="carousel">
                    <div class="carousel-indicators">
                        <% destination.images.forEach((image, index) => { %>
                            <button type="button" data-bs-target="#destinationCarousel" data-bs-slide-to="<%= index %>" 
                                    class="<%= index === 0 ? 'active' : '' %>"></button>
                        <% }); %>
                    </div>
                    <div class="carousel-inner rounded">
                        <% destination.images.forEach((image, index) => { %>
                            <div class="carousel-item <%= index === 0 ? 'active' : '' %>">
                                <img src="<%= image.url %>" class="d-block w-100" alt="<%= image.alt %>">
                                <div class="carousel-caption d-none d-md-block">
                                    <h5><%= image.title %></h5>
                                    <p><%= image.caption %></p>
                                </div>
                            </div>
                        <% }); %>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#destinationCarousel" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#destinationCarousel" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
                
                <div class="card mb-4">
                    <div class="card-body">
                        <h2 class="card-title">About <%= destination.name %></h2>
                        <p class="card-text"><%= destination.description %></p>
                        <% if (destination.history) { %>
                            <h3>History</h3>
                            <p><%= destination.history %></p>
                        <% } %>
                        <% if (destination.culture) { %>
                            <h3>Culture</h3>
                            <p><%= destination.culture %></p>
                        <% } %>
                    </div>
                </div>
                
                <div class="card mb-4">
                    <div class="card-header bg-primary text-white">
                        <h3 class="card-title mb-0">Top Attractions</h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <% destination.attractions.forEach(attraction => { %>
                                <div class="col-md-6 mb-3">
                                    <div class="card h-100">
                                        <img src="<%= attraction.imageUrl %>" class="card-img-top" alt="<%= attraction.name %>">
                                        <div class="card-body">
                                            <h5 class="card-title"><%= attraction.name %></h5>
                                            <p class="card-text"><%= attraction.description %></p>
                                            <% if (attraction.entranceFee) { %>
                                                <p><strong>Entrance Fee:</strong> â‚¹<%= attraction.entranceFee.toLocaleString() %></p>
                                            <% } %>
                                            <% if (attraction.timings) { %>
                                                <p><strong>Timings:</strong> <%= attraction.timings %></p>
                                            <% } %>
                                            <% if (attraction.categories && attraction.categories.length > 0) { %>
                                                <div>
                                                    <% attraction.categories.forEach(category => { %>
                                                        <span class="badge bg-info me-1"><%= category %></span>
                                                    <% }); %>
                                                </div>
                                            <% } %>
                                        </div>
                                    </div>
                                </div>
                            <% }); %>
                        </div>
                    </div>
                </div>
                
                <div class="card mb-4">
                    <div class="card-header bg-success text-white">
                        <h3 class="card-title mb-0">Food & Dining</h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <% destination.food.forEach(item => { %>
                                <div class="col-md-6 mb-3">
                                    <div class="card h-100">
                                        <div class="card-body">
                                            <h5 class="card-title"><%= item.name %></h5>
                                            <p class="card-text"><%= item.description %></p>
                                            <% if (item.where) { %>
                                                <p><strong>Where to try:</strong> <%= item.where %></p>
                                            <% } %>
                                            <% if (item.price) { %>
                                                <p><strong>Price Range:</strong> <%= item.price %></p>
                                            <% } %>
                                        </div>
                                    </div>
                                </div>
                            <% }); %>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="card mb-4 sticky-top" style="top: 20px; z-index: 1;">
                    <div class="card-header bg-primary text-white">
                        <h3 class="card-title mb-0">Plan Your Visit</h3>
                    </div>
                    <div class="card-body">
                        <h5>Best Time to Visit</h5>
                        <p><%= destination.bestTimeToVisit %></p>
                        
                        <h5>How to Reach</h5>
                        <ul class="list-group mb-3">
                            <% if (destination.howToReach.air) { %>
                                <li class="list-group-item">
                                    <strong>By Air:</strong> <%= destination.howToReach.air %>
                                </li>
                            <% } %>
                            <% if (destination.howToReach.train) { %>
                                <li class="list-group-item">
                                    <strong>By Train:</strong> <%= destination.howToReach.train %>
                                </li>
                            <% } %>
                            <% if (destination.howToReach.road) { %>
                                <li class="list-group-item">
                                    <strong>By Road:</strong> <%= destination.howToReach.road %>
                                </li>
                            <% } %>
                        </ul>
                        
                        <h5>Local Transport</h5>
                        <p><%= destination.localTransport %></p>
                        
                        <h5>Accommodation</h5>
                        <ul class="list-group mb-3">
                            <% destination.accommodation.forEach(item => { %>
                                <li class="list-group-item">
                                    <strong><%= item.type %>:</strong> <%= item.description %>
                                    <p class="mb-0 small"><%= item.priceRange %></p>
                                </li>
                            <% }); %>
                        </ul>
                        
                        <a href="/" class="btn btn-primary w-100">Plan Your Itinerary</a>
                    </div>
                </div>
                
                <div class="card mb-4">
                    <div class="card-header bg-info text-white">
                        <h3 class="card-title mb-0">Travel Tips</h3>
                    </div>
                    <div class="card-body">
                        <ul class="list-group">
                            <% destination.travelTips.forEach(tip => { %>
                                <li class="list-group-item">
                                    <i class="bi bi-info-circle-fill text-info me-2"></i>
                                    <%= tip %>
                                </li>
                            <% }); %>
                        </ul>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header bg-warning">
                        <h3 class="card-title mb-0">Weather</h3>
                    </div>
                    <div class="card-body">
                        <div class="weather-info">
                            <% destination.weather.forEach(season => { %>
                                <div class="season-info mb-2">
                                    <h5><%= season.name %> (<%= season.months %>)</h5>
                                    <p><strong>Temperature:</strong> <%= season.temperature %></p>
                                    <p><%= season.description %></p>
                                </div>
                            <% }); %>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="related-destinations mb-5">
            <h3>Explore Nearby Destinations</h3>
            <div class="row">
                <% destination.nearbyDestinations.forEach(nearby => { %>
                    <div class="col-md-3 mb-3">
                        <div class="card h-100">
                            <img src="<%= nearby.imageUrl %>" class="card-img-top" alt="<%= nearby.name %>">
                            <div class="card-body">
                                <h5 class="card-title"><%= nearby.name %></h5>
                                <p class="card-text"><%= nearby.distance %> from <%= destination.name %></p>
                                <a href="/destinations/<%= nearby.id %>" class="btn btn-outline-primary btn-sm">View Details</a>
                            </div>
                        </div>
                    </div>
                <% }); %>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/destination-detail.js"></script>
</body>
</html>